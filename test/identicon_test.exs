defmodule IdenticonTest do
  use ExUnit.Case

  test "Generate an identicon image from a string" do
    expected =
      <<137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 250, 0, 0, 0, 250,
        8, 2, 0, 0, 0, 7, 142, 205, 106, 0, 0, 6, 167, 73, 68, 65, 84, 120, 156, 237, 212, 209,
        173, 20, 48, 20, 3, 209, 109, 132, 142, 41, 143, 126, 160, 129, 252, 88, 70, 207, 27, 229,
        88, 83, 64, 52, 119, 148, 207, 159, 95, 191, 191, 147, 191, 223, 183, 185, 19, 174, 74,
        62, 243, 23, 56, 33, 87, 63, 134, 220, 131, 205, 157, 112, 85, 34, 247, 96, 115, 39, 92,
        149, 200, 61, 216, 220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137, 220, 131, 205, 157,
        112, 85, 34, 247, 96, 115, 39, 92, 149, 200, 61, 216, 220, 9, 87, 37, 114, 15, 54, 119,
        194, 85, 137, 220, 131, 205, 157, 112, 85, 34, 247, 96, 115, 39, 92, 149, 200, 61, 216,
        220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137, 220, 131, 205, 157, 112, 85, 34, 247, 96,
        115, 39, 92, 149, 200, 61, 216, 220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137, 220, 131,
        205, 157, 112, 85, 34, 247, 96, 115, 39, 92, 149, 200, 61, 216, 220, 9, 87, 37, 114, 15,
        54, 119, 194, 85, 137, 220, 131, 205, 157, 112, 85, 34, 247, 96, 115, 39, 92, 149, 200,
        61, 216, 220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137, 220, 131, 205, 157, 112, 85, 34,
        247, 96, 115, 39, 92, 149, 200, 61, 216, 220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137,
        220, 131, 205, 157, 112, 85, 34, 247, 96, 115, 39, 92, 149, 200, 61, 216, 220, 9, 87, 37,
        114, 15, 54, 119, 194, 85, 137, 220, 131, 205, 157, 112, 85, 34, 247, 96, 115, 39, 92,
        149, 200, 61, 216, 220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137, 220, 131, 205, 157,
        112, 85, 34, 247, 96, 115, 39, 92, 149, 200, 61, 216, 220, 9, 87, 37, 114, 15, 54, 119,
        194, 85, 137, 220, 131, 205, 157, 112, 85, 34, 247, 96, 115, 39, 92, 149, 200, 61, 216,
        220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137, 220, 131, 205, 157, 112, 85, 34, 247, 96,
        115, 39, 92, 149, 200, 61, 216, 220, 9, 87, 37, 114, 15, 54, 119, 194, 85, 137, 220, 131,
        205, 157, 112, 85, 242, 89, 107, 185, 105, 243, 107, 93, 148, 251, 119, 78, 238, 193, 230,
        89, 203, 189, 156, 220, 131, 205, 179, 150, 123, 57, 185, 7, 155, 103, 45, 247, 114, 114,
        15, 54, 207, 90, 238, 229, 228, 30, 108, 158, 181, 220, 203, 201, 61, 216, 60, 107, 185,
        151, 147, 123, 176, 121, 214, 114, 47, 39, 247, 96, 243, 172, 229, 94, 78, 238, 193, 230,
        89, 203, 189, 156, 220, 131, 205, 179, 150, 123, 57, 185, 7, 155, 103, 45, 247, 114, 114,
        15, 54, 207, 90, 238, 229, 228, 30, 108, 158, 181, 220, 203, 201, 61, 216, 60, 107, 185,
        151, 147, 123, 176, 121, 214, 114, 47, 39, 247, 96, 243, 172, 229, 94, 78, 238, 193, 230,
        89, 203, 189, 156, 220, 131, 205, 179, 150, 123, 57, 185, 7, 155, 103, 45, 247, 114, 114,
        15, 54, 207, 90, 238, 229, 228, 30, 108, 158, 181, 220, 203, 201, 61, 216, 60, 107, 185,
        151, 147, 123, 176, 121, 214, 114, 47, 39, 247, 96, 243, 172, 229, 94, 78, 238, 193, 230,
        89, 203, 189, 156, 220, 131, 205, 179, 150, 123, 57, 185, 7, 155, 103, 45, 247, 114, 114,
        15, 54, 207, 90, 238, 229, 228, 30, 108, 158, 181, 220, 203, 201, 61, 216, 60, 107, 185,
        151, 147, 123, 176, 121, 214, 114, 47, 39, 247, 96, 243, 172, 229, 94, 78, 238, 193, 230,
        89, 203, 189, 156, 220, 131, 205, 179, 150, 123, 57, 185, 7, 155, 103, 45, 247, 114, 114,
        15, 54, 207, 90, 238, 229, 228, 30, 108, 158, 181, 220, 203, 201, 61, 216, 60, 107, 185,
        151, 147, 123, 176, 121, 214, 114, 47, 39, 247, 96, 243, 172, 229, 94, 78, 238, 193, 230,
        89, 203, 189, 156, 220, 131, 205, 179, 150, 123, 57, 185, 7, 155, 103, 45, 247, 114, 114,
        15, 54, 207, 90, 238, 229, 228, 30, 108, 158, 181, 220, 203, 201, 61, 216, 60, 107, 185,
        151, 147, 123, 176, 121, 214, 114, 47, 39, 247, 96, 243, 172, 229, 94, 238, 51, 63, 21,
        240, 99, 200, 61, 99, 253, 61, 29, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220,
        201, 69, 200, 61, 99, 221, 246, 97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157,
        92, 132, 220, 51, 214, 109, 31, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201,
        69, 200, 61, 99, 221, 246, 97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92,
        132, 220, 51, 214, 109, 31, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69,
        200, 61, 99, 221, 246, 97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132,
        220, 51, 214, 109, 31, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200,
        61, 99, 221, 246, 97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220,
        51, 214, 109, 31, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61,
        99, 221, 246, 97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51,
        214, 109, 31, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61, 99,
        221, 246, 97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51, 214,
        109, 31, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61, 99, 221,
        246, 97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51, 214, 109,
        31, 54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61, 99, 221, 246,
        97, 115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51, 214, 109, 31,
        54, 119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61, 99, 221, 246, 97,
        115, 39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51, 214, 109, 31, 54,
        119, 114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61, 99, 221, 246, 97, 115,
        39, 23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51, 214, 109, 31, 54, 119,
        114, 17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61, 99, 221, 246, 97, 115, 39,
        23, 33, 247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51, 214, 109, 31, 54, 119, 114,
        17, 114, 207, 88, 183, 125, 216, 220, 201, 69, 200, 61, 99, 221, 246, 97, 115, 39, 23, 33,
        247, 140, 117, 219, 135, 205, 157, 92, 132, 220, 51, 214, 109, 31, 54, 119, 114, 17, 114,
        199, 67, 124, 111, 238, 235, 79, 243, 176, 185, 19, 174, 74, 228, 30, 108, 238, 132, 171,
        18, 185, 7, 155, 59, 225, 170, 68, 238, 193, 230, 78, 184, 42, 145, 123, 176, 185, 19,
        174, 74, 228, 30, 108, 238, 132, 171, 18, 185, 7, 155, 59, 225, 170, 68, 238, 193, 230,
        78, 184, 42, 145, 123, 176, 185, 19, 174, 74, 228, 30, 108, 238, 132, 171, 18, 185, 7,
        155, 59, 225, 170, 68, 238, 193, 230, 78, 184, 42, 145, 123, 176, 185, 19, 174, 74, 228,
        30, 108, 238, 132, 171, 18, 185, 7, 155, 59, 225, 170, 68, 238, 193, 230, 78, 184, 42,
        145, 123, 176, 185, 19, 174, 74, 228, 30, 108, 238, 132, 171, 18, 185, 7, 155, 59, 225,
        170, 68, 238, 193, 230, 78, 184, 42, 145, 123, 176, 185, 19, 174, 74, 228, 30, 108, 238,
        132, 171, 18, 185, 7, 155, 59, 225, 170, 68, 238, 193, 230, 78, 184, 42, 145, 123, 176,
        185, 19, 174, 74, 228, 30, 108, 238, 132, 171, 18, 185, 7, 155, 59, 225, 170, 68, 238,
        193, 230, 78, 184, 42, 145, 123, 176, 185, 19, 174, 74, 228, 30, 108, 238, 132, 171, 18,
        185, 7, 155, 59, 225, 170, 68, 238, 193, 230, 78, 184, 42, 145, 123, 176, 185, 19, 174,
        74, 228, 30, 108, 238, 132, 171, 18, 185, 7, 155, 59, 225, 170, 68, 238, 193, 230, 78,
        184, 42, 145, 123, 176, 185, 19, 174, 74, 228, 30, 108, 238, 132, 171, 18, 185, 7, 155,
        59, 225, 170, 68, 238, 193, 230, 78, 184, 42, 145, 123, 176, 185, 19, 174, 74, 228, 30,
        108, 238, 132, 171, 18, 185, 7, 155, 59, 225, 170, 68, 238, 193, 230, 78, 184, 42, 145,
        123, 176, 185, 19, 174, 74, 228, 30, 108, 238, 132, 171, 18, 185, 7, 155, 59, 225, 170,
        68, 238, 193, 230, 78, 184, 42, 145, 123, 176, 185, 19, 174, 74, 190, 55, 119, 224, 191,
        35, 119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16,
        114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33,
        119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16,
        114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33,
        119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16,
        114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33,
        119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16,
        114, 199, 67, 200, 29, 15, 33, 119, 60, 132, 220, 241, 16, 114, 199, 67, 200, 29, 15, 33,
        119, 60, 196, 63, 75, 255, 22, 105, 95, 184, 54, 26, 0, 0, 0, 0, 73, 69, 78, 68, 174, 66,
        96, 130>>

    got = Identicon.from_string("")

    assert expected == got
  end

  test "Append .png to the input string to generate the output filename" do
    expected = "elixir.png"
    got = Identicon.filename("elixir")

    assert expected == got
  end

  test "Use _.png as the output filename if the input string is empty" do
    expected = "_.png"

    got = Identicon.filename("")
    assert expected == got

    got = Identicon.filename("   ")
    assert expected == got
  end
end
